<div class="proyecto-card">
  <!-- HEADER -->
  <div class="card-header">
    <div class="codigo-prioridad">
      <span class="proyecto-codigo">{{ proyecto.codigoProyecto || 'Sin código' }}</span>
      <span class="badge-prioridad" [ngClass]="clasePrioridad">
        {{ proyecto.prioridad }}
      </span>
    </div>
    <div class="cliente-nombre">{{ proyecto.clienteNombre }}</div>
  </div>

  <!-- NOMBRE DEL PROYECTO -->
  <div class="proyecto-nombre">
    {{ proyecto.nombreProyecto }}
  </div>

  <!-- PROGRESO GENERAL -->
  <div class="progreso-section">
    <div class="progreso-header">
      <span class="progreso-label">Progreso General</span>
      <span class="progreso-valor">{{ progresoGeneral }}%</span>
    </div>
    <div class="barra-progreso">
      <div class="barra-fill" 
           [style.width.%]="progresoGeneral"
           [style.background-color]="colorProgreso">
      </div>
    </div>
  </div>

  <!-- ÁREA ACTUAL -->
  <div class="area-actual" *ngIf="areaActual">
    <div class="area-badge" [style.background-color]="areaActual.color + '20'" 
                            [style.color]="areaActual.color">
      <i class="fas" [ngClass]="areaActual.icono"></i>
      <span>{{ areaActual.nombreCorto }}</span>
    </div>
  </div>

  <!-- MINI ÁREAS (visible en hover) -->
  <div class="mini-areas">
    <div class="mini-area" 
         *ngFor="let area of AREAS"
         [class.completa]="estaCompleta(area)"
         [class.en-progreso]="enProgreso(area)"
         [title]="area.nombre + ': ' + getAvanceArea(area.campo) + '%'">
      <div class="mini-area-icon" [style.background-color]="area.color">
        <i class="fas" [ngClass]="area.icono"></i>
      </div>
      <div class="mini-area-barra">
        <div class="mini-barra-fill" 
             [style.width.%]="getAvanceArea(area.campo)"
             [style.background-color]="area.color">
        </div>
      </div>
      <span class="mini-area-porcentaje">{{ getAvanceArea(area.campo) }}%</span>
    </div>
  </div>

  <!-- INFO ADICIONAL -->
  <div class="info-adicional">
    <div class="info-item">
      <i class="fas fa-box"></i>
      <span>{{ proyecto.cantidadProducida || 0 }}/{{ proyecto.cantidadTotal }}</span>
    </div>
    <div class="info-item" *ngIf="proyecto.fechaFin">
      <i class="fas fa-calendar"></i>
      <span>{{ proyecto.fechaFin | date:'dd/MM' }}</span>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="card-footer">
    <button class="btn-ver-detalle" (click)="onVerDetalle()">
      <i class="fas fa-eye"></i>
      Ver Detalles
    </button>
  </div>
</div>