<!-- app.component.html -->
<div class="app-layout">
  <aside class="sidebar" *ngIf="mostrarSidebar">
    <div class="logo">
      TAMARINDO
    </div>
    
    <nav class="nav-menu">

      <!-- Proyectos con submenu -->
      <div class="nav-item-container">
        <a routerLink="/proyectos" 
          routerLinkActive="active" 
          class="nav-item parent" 
          [class.active]="proyectoAbierto"
          (click)="toggleProyectos()">
          <span class="text">Proyectos</span>
        </a>
        
        <div class="submenu" [class.open]="proyectoAbierto">
          <a routerLink="/proyectos/crear" routerLinkActive="active" class="nav-item sub">
            <span class="text">Crear Proyecto</span>
          </a>
          <a routerLink="/proyectos/historial" routerLinkActive="active" class="nav-item sub">
            <span class="text">Consultar Historial de Proyectos</span>
          </a>
        </div>
      </div>

            
      <a routerLink="/clientes" routerLinkActive="active" class="nav-item">
        <span class="text">Clientes</span>
      </a>
      
      <a routerLink="/inventario" routerLinkActive="active" class="nav-item">
        <span class="text">Inventario</span>
      </a>

      <!-- Reportes con submenu -->
      <div class="nav-item-container">
        <div class="nav-item parent" 
             [class.active]="reportesAbierto"
             (click)="toggleReportes()">
          <span class="text">Reportes</span>
        </div>
        
        <div class="submenu" [class.open]="reportesAbierto">
          <a routerLink="/reportes/proyectos" routerLinkActive="active" class="nav-item sub">
            <span class="text">Reporte de Proyectos</span>
          </a>
          <a routerLink="/reportes/inventario" routerLinkActive="active" class="nav-item sub">
            <span class="text">Reporte de Inventario</span>
          </a>
          <a routerLink="/reportes/financiero" routerLinkActive="active" class="nav-item sub">
            <span class="text">Reporte Financiero</span>
          </a>
          <a routerLink="/reportes/clientes" routerLinkActive="active" class="nav-item sub">
            <span class="text">Reporte de Clientes</span>
          </a>
        </div>
      </div>
                  
      <a routerLink="/usuarios" routerLinkActive="active" class="nav-item">
        <span class="text">Usuarios</span>
      </a>

      <a routerLink="/ordenes" routerLinkActive="active" class="nav-item">
        <span class="text">Órdenes de Compra</span>
      </a>
    </nav>

    <div class="user-profile">
      <div class="avatar">
        <img src="assets/avatar.jpg" alt="User" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
        <div class="avatar-placeholder">{{ obtenerIniciales() }}</div>
      </div>
      <div class="user-info">
        <div class="user-name">{{ obtenerNombreUsuario() }}</div>
        <button class="logout-btn" (click)="cerrarSesion()" title="Cerrar sesión">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          <span>Cerrar sesión</span>
        </button>
      </div>
    </div>
  </aside>

  <main class="main-content" [class.sin-sidebar]="!mostrarSidebar">
    <router-outlet></router-outlet>
  </main>
</div>